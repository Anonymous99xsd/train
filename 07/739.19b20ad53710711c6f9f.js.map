{"version":3,"file":"739.19b20ad53710711c6f9f.js","mappings":"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","sources":["webpack://08/./src/components/Battle/index.js"],"sourcesContent":["/* eslint-disable no-debugger */\r\nimport React, { useState, useRef } from 'react'\r\nimport axios from 'axios'\r\nimport { useFormik } from 'formik'\r\nimport { Link } from 'react-router-dom'\r\n\r\nexport default function Battle() {\r\n    const [isShow, setIsShow] = useState(false)\r\n    // 控制头像实例显示\r\n    const [isAvatar, setIsAvatar] = useState([false, false])\r\n    const [img, setImg] = useState(new Array(2))\r\n    const [name, setName] = useState(new Array(2))\r\n    const [error, setError] = useState()\r\n    // 输入框实例\r\n    const userRef1 = useRef()\r\n    const userRef2 = useRef()\r\n    const [isClick1, setIsClick1] = useState(false)\r\n    const [isClick2, setIsClick2] = useState(false)\r\n    //测试 form验证\r\n    const formRule = ()=>{\r\n        document.querySelector(\"#i-submit\").click()\r\n    }\r\n    // 查询头像方法\r\n    const getAvatar = (username, index) => {\r\n        axios.get('https://api.github.com/users/' + username)\r\n            .then(response => {\r\n                let temp = img.slice()\r\n                temp[index] = `https://avatars.githubusercontent.com/u/${response.data.id}?s=200&v=4`\r\n                setImg(temp)\r\n                let tempname = name.slice()\r\n                tempname[index] = username\r\n                setName(tempname)\r\n            })\r\n            .then(() => {\r\n                let temp = isAvatar.slice()\r\n                temp[index] = true\r\n                setIsAvatar(temp)\r\n                formRule()\r\n            })\r\n            .catch(error => {\r\n                let temp = isAvatar.slice()\r\n                temp[index] = true\r\n                setIsAvatar(temp)\r\n                setError(error.message)\r\n                if (index) setIsClick2(false)\r\n                else setIsClick1(false)\r\n            })\r\n    }\r\n\r\n    function clickHandle(e, num) {\r\n        if (e.clientX === 0 || (e.keyCode && e.keyCode !== 13)) return\r\n        let username = e.target.parentNode.childNodes[1].value\r\n        if (username.trim() === '') return\r\n        if (isAvatar[num]) return\r\n        if (num) setIsClick2(true)\r\n        else setIsClick1(true)\r\n        if (!num) {\r\n            getAvatar(username, 0)\r\n        } else {\r\n            getAvatar(username, 1)\r\n        }\r\n    }\r\n\r\n    function removeAvatar(index) {\r\n        let temp = isAvatar.slice()\r\n        temp[index] = false\r\n        setIsAvatar(temp)\r\n        setIsShow(false)\r\n        let tempName = name.slice()\r\n        tempName[index] = false\r\n        setName(tempName)\r\n        if (!index) {\r\n            formik.values.user1 = ''\r\n            userRef1.current.value = ''\r\n            setIsClick1(false)\r\n        } else {\r\n            formik.values.user2 = ''\r\n            userRef2.current.value = ''\r\n            setIsClick2(false)\r\n        }\r\n    }\r\n\r\n    // 表单\r\n    const formik = useFormik({\r\n        initialValues: {\r\n            user1: '',\r\n            user2: '',\r\n        },\r\n        onSubmit: () => {\r\n            if (isAvatar[0] && isAvatar[1]) {\r\n                setIsShow(true)\r\n            }\r\n        },\r\n        validate: v => {\r\n            setIsShow(false)\r\n            let error = {}\r\n            if (!v.user1) error.message = '请输入用户名'\r\n            return error\r\n        }\r\n    })\r\n    let isDisable1 = formik.values.user1.trim() === '' || isClick1 || isAvatar[0]\r\n    let isDisable2 = formik.values.user2.trim() === '' || isClick2 || isAvatar[1]\r\n\r\n    return (\r\n        <div style={{width:'80%', display:'flex', flexDirection:'column', alignItems:'center', margin:'0 auto'}}>\r\n            <h2>Instructions</h2>\r\n            <div style={{width:'80%', display:'flex', justifyContent:'space-between'}}>\r\n                <div>\r\n                    <h3 style={{textAlign:'center'}}>Enter two Github users</h3>\r\n                    <i style={{color:'orange', width:'200px', height:'200px', backgroundColor:'#eee', display:'flex', justifyContent:'center', alignItems:'center'}} className=\"fas fa-users fa-8x\">\r\n                        <img src=\"\" alt=\"\" />\r\n                    </i>\r\n                </div>\r\n                <div>\r\n                    <h3 style={{textAlign:'center'}}>Battle</h3>\r\n                    <i style={{color:'#666', width:'200px', height:'200px', backgroundColor:'#eee', display:'flex', justifyContent:'center', alignItems:'center'}} className=\"fas fa-fighter-jet fa-8x\">\r\n                        <img src=\"\" alt=\"\" />\r\n                    </i>\r\n                </div>\r\n                <div>\r\n                    <h3 style={{textAlign:'center'}}>See the winner</h3>\r\n                    <i style={{color:'yellow', width:'200px', height:'200px', backgroundColor:'#eee', display:'flex', justifyContent:'center', alignItems:'center'}} className=\"fas fa-trophy fa-8x\">\r\n                        <img src=\"\" alt=\"\" />\r\n                    </i>\r\n                </div>\r\n            </div>\r\n            <h2 style={{marginTop:'100px'}}>Players</h2>\r\n            <form style={{width:'100%'}} onSubmit={formik.handleSubmit}>\r\n                <div style={{width:'100%', display:'flex', justifyContent:'space-around'}}>\r\n                    <div>\r\n                        <h3 style={{textAlign:'center'}}>Player One</h3>\r\n                        <input onKeyDown={(e) => {clickHandle(e, 0)}} ref={userRef1} name=\"user1\" type=\"text\" defaultValue={formik.values.user1} onChange={formik.handleChange} />\r\n                        <button onClick={(e) => {clickHandle(e, 0)}} style={{marginLeft:'20px', cursor:isDisable1 ? 'not-allowed' : 'pointer'}} disabled={isDisable1 ? 'disabled' : ''}>SUBMIT</button>\r\n                    </div>\r\n                    <div>\r\n                        <h3 style={{textAlign:'center'}}>Player Two</h3>\r\n                        <input onKeyDown={(e) => {clickHandle(e, 1)}} ref={userRef2} name=\"user2\" type=\"text\" defaultValue={formik.values.user2} onChange={formik.handleChange} />\r\n                        <button onClick={(e) => {\r\n                            clickHandle(e, 1)\r\n                        }} style={{marginLeft:'20px', cursor:isDisable2 ? 'not-allowed' : 'pointer'}} disabled={isDisable2 ? 'disabled' : ''} >SUBMIT</button>\r\n                    </div>\r\n                </div>\r\n                <button id=\"i-submit\"type=\"submit\" style={{ display: 'none' }}></button>\r\n            </form>\r\n            <div style={{width:'74%', position:'relative'}}>\r\n                {\r\n                    isAvatar.map((v, i) => {\r\n                        return (\r\n                            <div key={i} style={{display:isAvatar[i] ? 'flex' : 'none', margin:'20px 0', position:'absolute', right:i === 1 ? '0' : '', alignItems:'center', fontSize:'28px', color:'#1890ff'}}>\r\n                                {\r\n                                    name[i] && <><img style={{width:'64px', height:'64px', marginRight:'20px'}} src={img[i]} alt=\"\" />\r\n                                    <div>{name[i]}</div></> || <p style={{color: 'red', fontSize:'14px'}}>{error}</p>\r\n                                }\r\n                                <span onClick={() => {removeAvatar(i)}} style={{marginLeft:'15px',height:'36px',width:'36px',fontSize:'48px',display:'inline-block',borderRadius:'50%', color:'#fff',cursor:'pointer'}}>\r\n                                    <i style={{fontSize:'36px', position:'absolute',color:'red'}} className=\"fas fa-times-circle\"></i>\r\n                                </span>\r\n                            </div>\r\n                        )\r\n                    })\r\n                }\r\n            </div>\r\n            <button style={{display:isShow ? 'block' : 'none', marginTop:'100px', width:'100px', height:'40px'}}>\r\n                <Link style={{textDecoration:'none', color:'#333', padding:'12px 18px'}} to={`/battle/result?user1=${name[0]}&user2=${name[1]}`}>BATTLE</Link>\r\n            </button>\r\n        </div>\r\n    )\r\n}\r\n"],"names":["Battle","useState","isShow","setIsShow","isAvatar","setIsAvatar","Array","img","setImg","name","setName","error","setError","userRef1","useRef","userRef2","isClick1","setIsClick1","isClick2","setIsClick2","clickHandle","e","num","clientX","keyCode","username","target","parentNode","childNodes","value","trim","index","axios","then","response","temp","slice","data","id","tempname","document","querySelector","click","message","getAvatar","formik","useFormik","initialValues","user1","user2","onSubmit","validate","v","isDisable1","values","isDisable2","style","width","display","flexDirection","alignItems","margin","justifyContent","textAlign","color","height","backgroundColor","className","src","alt","marginTop","handleSubmit","onKeyDown","ref","type","defaultValue","onChange","handleChange","onClick","marginLeft","cursor","disabled","position","map","i","key","right","fontSize","marginRight","tempName","current","removeAvatar","borderRadius","textDecoration","padding","to"],"sourceRoot":""}