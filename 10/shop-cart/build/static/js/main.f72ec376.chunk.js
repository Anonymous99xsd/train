(this["webpackJsonpshop-cart"]=this["webpackJsonpshop-cart"]||[]).push([[0],{194:function(t,e,a){var n={"./0.jpg":366,"./1.jpg":367,"./10.jpg":368,"./11.jpg":369,"./12.jpg":370,"./13.jpg":371,"./14.jpg":372,"./15.jpg":373,"./16.jpg":374,"./2.jpg":375,"./3.jpg":376,"./4.jpg":377,"./5.jpg":378,"./6.jpg":379,"./7.jpg":380,"./8.jpg":381,"./9.jpg":382};function c(t){var e=r(t);return a(e)}function r(t){if(!a.o(n,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return n[t]}c.keys=function(){return Object.keys(n)},c.resolve=r,t.exports=c,c.id=194},208:function(t,e,a){"use strict";a.r(e);var n=a(30),c=a.n(n),r=(a(359),c()());r.model(a(387).default),r.router(a(386).default),r.start("#root")},268:function(t,e){},359:function(t,e,a){},360:function(t,e,a){},361:function(t,e,a){},363:function(t,e,a){},365:function(t,e,a){},366:function(t,e,a){t.exports=a.p+"static/media/0.96badb6f.jpg"},367:function(t,e,a){t.exports=a.p+"static/media/1.bfdc616c.jpg"},368:function(t,e,a){t.exports=a.p+"static/media/10.c23ce225.jpg"},369:function(t,e,a){t.exports=a.p+"static/media/11.ebf63603.jpg"},370:function(t,e,a){t.exports=a.p+"static/media/12.1250c07d.jpg"},371:function(t,e,a){t.exports=a.p+"static/media/13.054e6832.jpg"},372:function(t,e,a){t.exports=a.p+"static/media/14.0d58ff93.jpg"},373:function(t,e,a){t.exports=a.p+"static/media/15.be081f68.jpg"},374:function(t,e,a){t.exports=a.p+"static/media/16.27b63c57.jpg"},375:function(t,e,a){t.exports=a.p+"static/media/2.eeca77d9.jpg"},376:function(t,e,a){t.exports=a.p+"static/media/3.9cb24054.jpg"},377:function(t,e,a){t.exports=a.p+"static/media/4.96badb6f.jpg"},378:function(t,e,a){t.exports=a.p+"static/media/5.e86f32a0.jpg"},379:function(t,e,a){t.exports=a.p+"static/media/6.6487e09e.jpg"},380:function(t,e,a){t.exports=a.p+"static/media/7.7ec39881.jpg"},381:function(t,e,a){t.exports=a.p+"static/media/8.310ac226.jpg"},382:function(t,e,a){t.exports=a.p+"static/media/9.5a25035a.jpg"},384:function(t,e,a){},386:function(t,e,a){"use strict";a.r(e);var n=a(0),c=a(116),r=(a(360),a(30)),s=a(42),i=(a(361),a(4));var o=Object(r.connect)((function(t){return{sizes:t.data.sizes}}))((function(t){var e=Object(n.useState)(!0),a=Object(s.a)(e,2),c=a[0],r=a[1];return Object(i.jsxs)("div",{className:"filters",children:[Object(i.jsx)("h4",{className:"title",children:"\u5c3a\u7801\uff1a"}),t.sizes&&Object.entries(t.sizes).map((function(e,a){return Object(i.jsx)("div",{className:"filters-btn",children:Object(i.jsxs)("label",{htmlFor:e[0],children:[Object(i.jsx)("input",{type:"checkbox",value:e[0],id:e[0]}),Object(i.jsx)("span",{onClick:function(){!function(e,a){var n=t.dispatch,s=t.sizes,i=JSON.parse(JSON.stringify(s));if(!Object.values(i).filter((function(t){return!1===t})).length&&c){for(var o in i)o!==e&&(i[o]=!1);r(!1)}else for(var l in i)l===e&&(i[l]=!a);if(0===Object.values(i).filter((function(t){return!0===t})).length){for(var d in i)i[d]=!0;r(!0)}n({type:"data/filterSize",payload:{sizes:i}})}(e[0],e[1])},className:"checkmark",children:e[0]})]})},a)}))]})})),l=(a(363),a(391)),d=a(393),u=(a(364),a(105));a(365);var j=Object(r.connect)((function(t){return{data:t.data.data,sizes:t.data.sizes,isEject:t.data.isEject}}))((function(t){var e=Object(n.useRef)();Object(n.useEffect)((function(){e.current&&t.getNum(e.current.childNodes.length)}),[t]);var c=function(e){var a=t.dispatch,n=t.isEject;a({type:"data/addGood",payload:e}),n||a({type:"data/eject"})};if(!t.data)return null;var r=t.data,s=t.sizes,o=Object.entries(s).filter((function(t){return!0===t[1]})).map((function(t){return t[0]}));return Object(i.jsx)("div",{ref:e,className:"item-container",children:r.map((function(t,e){var n,s=Object(u.a)(r[e].availableSizes);try{for(s.s();!(n=s.n()).done;){var l=n.value;if(o.includes(l))return Object(i.jsxs)("div",{className:"item",children:[Object(i.jsx)("div",{className:"item-title",children:"\u514d\u8fd0\u8d39"}),Object(i.jsx)("div",{children:Object(i.jsx)("img",{className:"item-img",src:a(194)("./".concat(r[e].id,".jpg")),alt:""})}),Object(i.jsx)("p",{className:"item-name",children:r[e].title}),Object(i.jsxs)("div",{className:"item-price",children:[Object(i.jsxs)("div",{className:"val",children:[Object(i.jsx)("span",{children:"$"}),Object(i.jsx)("b",{children:r[e].price.toString().split(".")[0]}),Object(i.jsxs)("span",{style:{fontSize:"16px"},children:[".",((r[e].price.toString().split(".")[1]?r[e].price.toString().split(".")[1]:"")+"00").substr(0,2)]})]}),Object(i.jsxs)("div",{className:"installment",children:[Object(i.jsxs)("span",{style:{fontSize:"16px"},children:["or ",r[e].installments," x "]}),Object(i.jsxs)("b",{style:{fontSize:"16px"},children:["$",(r[e].price/r[e].installments).toFixed(2)]})]})]}),Object(i.jsx)("div",{onClick:function(){return c(r[e])},className:"item-btn",children:"\u6dfb\u52a0\u81f3\u8d2d\u7269\u8f66"})]},r[e].id)}}catch(d){s.e(d)}finally{s.f()}return null}))})}));var p=Object(r.connect)((function(t){return{data:t.data.data,sizes:t.data.sizes}}))((function(t){var e=Object(n.useState)(0),a=Object(s.a)(e,2),c=a[0],r=a[1],o=Object(n.useState)("\u70b9\u51fb\u9009\u62e9"),u=Object(s.a)(o,2),p=u[0],f=u[1],b=Object(i.jsxs)(l.a,{onClick:function(e){return function(e){var a=JSON.parse(JSON.stringify(t.data));"0"===e.key?(a.sort((function(t,e){return t.id-e.id})),f("\u9ed8\u8ba4\u6392\u5e8f")):"1"===e.key?(a.sort((function(t,e){return t.price-e.price})),f("\u4ef7\u683c\u4ece\u4f4e\u5230\u9ad8")):"2"===e.key&&(a.sort((function(t,e){return e.price-t.price})),f("\u4ef7\u683c\u4ece\u9ad8\u5230\u4f4e")),(0,t.dispatch)({type:"data/sort",payload:{data:a}})}(e)},children:[Object(i.jsx)(l.a.Item,{children:"\u9ed8\u8ba4\u6392\u5e8f"},"0"),Object(i.jsx)(l.a.Divider,{}),Object(i.jsx)(l.a.Item,{children:"\u4ef7\u683c\u4ece\u4f4e\u5230\u9ad8"},"1"),Object(i.jsx)(l.a.Divider,{}),Object(i.jsx)(l.a.Item,{children:"\u4ef7\u683c\u4ece\u9ad8\u5230\u4f4e"},"2")]});return Object(i.jsxs)("div",{className:"container",children:[Object(i.jsxs)("div",{className:"header",children:[Object(i.jsxs)("span",{className:"information",children:["\u5171\u67e5\u627e\u5230 ",c," \u4ef6\u5546\u54c1\u3002"]}),Object(i.jsxs)("div",{className:"sort",children:["\u6839\u636e\xa0\xa0",Object(i.jsx)(d.a,{overlay:b,trigger:["click"],children:Object(i.jsxs)("span",{className:"select ant-dropdown-link",onClick:function(t){return t.preventDefault()},children:[" ",p," "]})}),"\xa0\xa0\u6392\u5e8f"]})]}),Object(i.jsx)(j,{getNum:function(t){r(t)}})]})}));a(384);var f=Object(r.connect)((function(t){return{shopCart:t.data.shopCart,isEject:t.data.isEject}}))((function(t){var e=t.dispatch,c=t.isEject,r=t.shopCart,o=Object(n.useState)(0),l=Object(s.a)(o,2),d=l[0],j=l[1],p=Object(n.useState)(0),f=Object(s.a)(p,2),b=f[0],O=f[1],h=Object(n.useRef)(),x=Object(n.useRef)(),m=Object(n.useRef)(),v=Object(n.useRef)(),y=Object(n.useRef)(),g=function(){h.current.classList.add("float-open"),x.current.style.display="none",v.current.style.display="inline-block"};Object(n.useEffect)((function(){var t=document.querySelectorAll(".float-item-del");if(t.length){var e,a=Object(u.a)(t);try{for(a.s();!(e=a.n()).done;){var n=e.value;n.addEventListener("mouseenter",(function(t){t.target.parentNode.style.backgroundColor="#0c0b10",t.target.parentNode.childNodes[3].childNodes[0].style.textDecoration="line-through",t.target.parentNode.childNodes[3].childNodes[1].style.textDecoration="line-through",t.target.parentNode.childNodes[4].childNodes[0].style.textDecoration="line-through",t.target.style.color="#fff"})),n.addEventListener("mouseleave",(function(t){t.target.parentNode.style.backgroundColor="#1b1a20",t.target.parentNode.childNodes[3].childNodes[0].style.textDecoration="none",t.target.parentNode.childNodes[3].childNodes[1].style.textDecoration="none",t.target.parentNode.childNodes[4].childNodes[0].style.textDecoration="none",t.target.style.color="#000"}))}}catch(c){a.e(c)}finally{a.f()}}}),[t]),Object(n.useEffect)((function(){var e=t.shopCart,a=(e||[]).reduce((function(t,e){return t+e.quantity}),0);j(a);var n=(e||[]).reduce((function(t,e){return t+e.quantity*e.price}),0);O(n.toFixed(2))}),[t]),Object(n.useEffect)((function(){c&&g()}),[t.isEject]);var N=Object(n.useState)(!1),k=Object(s.a)(N,2),S=k[0],C=k[1];return Object(n.useEffect)((function(){S?localStorage.setItem("shopCart",JSON.stringify(t.shopCart)):C(!0)}),[t.shopCart]),Object(i.jsxs)("div",{ref:h,className:"float-cart",children:[Object(i.jsx)("span",{onClick:function(){return g()},ref:x,className:"float-control float-control-close",children:Object(i.jsx)("span",{ref:m,className:"cart-quantity",children:d})}),Object(i.jsx)("div",{onClick:function(){return e({type:"data/closeShop"}),h.current.classList.remove("float-open"),v.current.style.display="none",void(x.current.style.display="inline-block")},ref:v,className:"float-control float-control-open",children:"\xd7"}),Object(i.jsxs)("div",{className:"float-container",children:[Object(i.jsxs)("div",{className:"float-header",children:[Object(i.jsx)("span",{className:"float-bag",children:Object(i.jsx)("span",{className:"cart-quantity offset",children:d})}),Object(i.jsx)("span",{className:"header-title",children:"\u8d2d\u7269\u8f66"})]}),Object(i.jsx)("div",{className:"float-content",children:!r.length&&Object(i.jsxs)("p",{children:["\u8d2d\u7269\u8f66\u662f\u7a7a\u7684",Object(i.jsx)("br",{}),"\ud83d\ude9a"]})||r.map((function(t,n){return Object(i.jsxs)("div",{className:"float-item",children:[Object(i.jsx)("i",{ref:y,onClick:function(){return a=t.id,void e({type:"data/deleteCart",payload:a});var a},className:"float-item-del fas fa-times"}),Object(i.jsx)("div",{}),Object(i.jsx)("div",{className:"float-item-image",children:Object(i.jsx)("img",{src:a(194)("./".concat(t.id,".jpg")),alt:""})}),Object(i.jsxs)("div",{className:"float-item-details",children:[Object(i.jsx)("p",{className:"float-item-title",children:t.title}),Object(i.jsxs)("p",{className:"float-item-content",children:[t.availableSizes[0]," | ",t.style,Object(i.jsx)("br",{}),"Quantity: ",t.quantity]})]}),Object(i.jsxs)("div",{className:"float-item-price",children:[Object(i.jsxs)("p",{children:["$ ",parseFloat(t.price+(void 0===t.price.toString().split(".")[1]?".00":"00")).toFixed(2)]}),Object(i.jsxs)("div",{children:[Object(i.jsx)("button",{onClick:function(){return a=t.id,void e({type:"data/subtrackGood",payload:a});var a},disabled:1===t.quantity?"disbaled":"",className:"subtrack",children:"-"}),Object(i.jsx)("button",{onClick:function(){return a=t.id,void e({type:"data/addOneGood",payload:a});var a},className:"add",children:"+"})]})]})]},t.id)}))}),Object(i.jsxs)("div",{className:"float-footer",children:[Object(i.jsx)("div",{className:"subtotal",children:"\u5408\u8ba1"}),Object(i.jsxs)("div",{className:"sub-price",children:[Object(i.jsxs)("p",{className:"sub-val",children:["$ ",b]}),Object(i.jsx)("small",{className:"sub-installment",children:function(t){return t-0===0?null:Object(i.jsxs)("span",{style:{fontSize:"16px"},children:["OR UP TO 9 x $ ",(t/9).toFixed(2)]})}(b)})]}),Object(i.jsx)("div",{onClick:function(){return alert("\u5171\u8ba1 "+b+" \u7f8e\u5143")},className:"bought",children:"\u652f\u4ed8"})]})]})]})}));var b=Object(r.connect)()((function(t){return Object(n.useEffect)((function(){var e=t.dispatch;e({type:"data/getListHttp"}),e({type:"data/getShopCart",payload:JSON.parse(localStorage.getItem("shopCart"))||[]})}),[]),Object(i.jsxs)("div",{className:"App",children:[Object(i.jsx)(o,{}),Object(i.jsx)(p,{}),Object(i.jsx)(f,{})]})}));e.default=function(t){var e=t.history;return Object(i.jsx)(c.Router,{history:e,children:Object(i.jsx)(c.Switch,{children:Object(i.jsx)(c.Route,{path:"/",exact:!0,component:b})})})}},387:function(t,e,a){"use strict";a.r(e);var n=a(11),c=a(23),r=a.n(c);function s(){return fetch("https://react-shopping-cart-67954.firebaseio.com/products.json").then((function(t){return t.json()})).then((function(t){return t})).catch((function(t){throw new Error(t)}))}e.default={namespace:"data",state:{sizes:{XS:!0,S:!0,M:!0,ML:!0,L:!0,XL:!0,XXL:!0},data:null,shopCart:[],isEject:!1},effects:{getListHttp:r.a.mark((function t(e,a){var n,c,i;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=a.call,c=a.put,t.next=3,n(s);case 3:return i=t.sent,t.next=6,c({type:"getData",payload:{data:i.products}});case 6:case"end":return t.stop()}}),t)})),addGood:r.a.mark((function t(e,a){var n,c,s,i,o,l;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.payload,a._,c=a.put,s=a.select,t.next=4,s((function(t){return JSON.parse(JSON.stringify(t.data.shopCart))}));case 4:if(0===(i=t.sent).length){t.next=19;break}o=null,t.t0=r.a.keys(i);case 8:if((t.t1=t.t0()).done){t.next=16;break}if(l=t.t1.value,i[l].id!==n.id){t.next=14;break}return i[l].quantity++,o=l,t.abrupt("break",16);case 14:t.next=8;break;case 16:null===o&&(n.quantity=1,i.push(n)),t.next=21;break;case 19:n.quantity=1,i.push(n);case 21:return t.next=23,c({type:"addCart",payload:i});case 23:case"end":return t.stop()}}),t)})),deleteCart:r.a.mark((function t(e,a){var n,c,s,i,o;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.payload,a._,c=a.put,s=a.select,t.next=4,s((function(t){return JSON.parse(JSON.stringify(t.data.shopCart))}));case 4:i=t.sent,t.t0=r.a.keys(i);case 6:if((t.t1=t.t0()).done){t.next=13;break}if(o=t.t1.value,i[o].id!==n){t.next=11;break}return i.splice(o,1),t.abrupt("break",13);case 11:t.next=6;break;case 13:return t.next=15,c({type:"deleteCarts",payload:i});case 15:case"end":return t.stop()}}),t)})),subtrackGood:r.a.mark((function t(e,a){var n,c,s,i,o;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.payload,a._,c=a.put,s=a.select,t.next=4,s((function(t){return JSON.parse(JSON.stringify(t.data.shopCart))}));case 4:i=t.sent,t.t0=r.a.keys(i);case 6:if((t.t1=t.t0()).done){t.next=13;break}if(o=t.t1.value,i[o].id!==n){t.next=11;break}return i[o].quantity-1===0?i.splice(o,1):i[o].quantity--,t.abrupt("break",13);case 11:t.next=6;break;case 13:return t.next=15,c({type:"subtrack",payload:i});case 15:case"end":return t.stop()}}),t)})),addOneGood:r.a.mark((function t(e,a){var n,c,s,i,o;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.payload,a._,c=a.put,s=a.select,t.next=4,s((function(t){return JSON.parse(JSON.stringify(t.data.shopCart))}));case 4:i=t.sent,t.t0=r.a.keys(i);case 6:if((t.t1=t.t0()).done){t.next=13;break}if(o=t.t1.value,i[o].id!==n){t.next=11;break}return i[o].quantity++,t.abrupt("break",13);case 11:t.next=6;break;case 13:return t.next=15,c({type:"add",payload:i});case 15:case"end":return t.stop()}}),t)}))},reducers:{getData:function(t,e){var a=e.payload;return Object(n.a)(Object(n.a)({},t),a)},getShopCart:function(t,e){var a=e.payload;return Object(n.a)(Object(n.a)({},t),{},{shopCart:a})},get:function(t){return Object(n.a)({},t)},filterSize:function(t,e){var a=e.payload;return Object(n.a)(Object(n.a)({},t),a)},sort:function(t,e){var a=e.payload;return Object(n.a)(Object(n.a)({},t),a)},addCart:function(t,e){var a=e.payload;return Object(n.a)(Object(n.a)({},t),{},{shopCart:a})},deleteCarts:function(t,e){var a=e.payload;return Object(n.a)(Object(n.a)({},t),{},{shopCart:a})},subtrack:function(t,e){var a=e.payload;return Object(n.a)(Object(n.a)({},t),{},{shopCart:a})},add:function(t,e){var a=e.payload;return Object(n.a)(Object(n.a)({},t),{},{shopCart:a})},eject:function(t){return Object(n.a)(Object(n.a)({},t),{},{isEject:!0})},closeShop:function(t){return Object(n.a)(Object(n.a)({},t),{},{isEject:!1})}}}}},[[208,1,2]]]);
//# sourceMappingURL=main.f72ec376.chunk.js.map