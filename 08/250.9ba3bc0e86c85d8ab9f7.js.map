{"version":3,"file":"250.9ba3bc0e86c85d8ab9f7.js","mappings":"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","sources":["webpack://08/./src/components/Battle/index.js"],"sourcesContent":["import React, { useState, useRef } from 'react'\r\nimport axios from 'axios'\r\nimport { useFormik } from 'formik'\r\nimport { Link } from 'react-router-dom'\r\nimport { message } from 'antd';\r\nimport 'antd/dist/antd.css';\r\n\r\nexport default function Battle() {\r\n    const [isShow, setIsShow] = useState(false)\r\n    // 控制头像实例显示\r\n    const [isAvatar, setIsAvatar] = useState([false, false])\r\n    const [img, setImg] = useState(new Array(2))\r\n    const [name, setName] = useState(new Array(2))\r\n    // 输入框实例\r\n    const userRef1 = useRef()\r\n    const userRef2 = useRef()\r\n    // 警告提示框\r\n    const warning = () => {\r\n        message.warning('已经请求过数据');\r\n    };\r\n    // 错误提示框\r\n    const errorMsg = () => {\r\n        message.error('用户查找失败');\r\n    };\r\n    // 查询头像方法\r\n    const getAvatar = (username, index) => {\r\n        if (isAvatar[index]) {\r\n            warning()\r\n            return\r\n        }\r\n        axios.get('https://api.github.com/users/' + username)\r\n            .then(response => {\r\n                let temp = img.slice()\r\n                temp[index] = `https://avatars.githubusercontent.com/u/${response.data.id}?s=200&v=4`\r\n                setImg(temp)\r\n                let tempname = name.slice()\r\n                tempname[index] = username\r\n                setName(tempname)\r\n            })\r\n            .then(() => {\r\n                let temp = isAvatar.slice()\r\n                temp[index] = true\r\n                setIsAvatar(temp)\r\n            })\r\n            .catch(error => {\r\n                console.log('error', error.message);\r\n                errorMsg()\r\n            })\r\n        // let temp = img.slice()\r\n        // temp[index] = `https://github.com/${username}.png?size=200`\r\n        // setImg(temp)\r\n        // let tempname = name.slice()\r\n        // tempname[index] = username\r\n        // setName(tempname)\r\n        // let tempa = isAvatar.slice()\r\n        // tempa[index] = true\r\n        // setIsAvatar(tempa)\r\n    }\r\n\r\n    function clickHandle(e, num) {\r\n        if (e.clientX === 0 || (e.keyCode && e.keyCode !== 13)) return\r\n        let username = e.target.parentNode.childNodes[1].value\r\n        if (username.trim() === '') return\r\n        if (isAvatar[num]) return\r\n        if (!num) {\r\n            getAvatar(username, 0)\r\n        } else {\r\n            getAvatar(username, 1)\r\n        }\r\n    }\r\n\r\n    function removeAvatar(index) {\r\n        let temp = isAvatar.slice()\r\n        temp[index] = false\r\n        setIsAvatar(temp)\r\n        setIsShow(false)\r\n        if (!index) {\r\n            formik.values.user1 = ''\r\n            userRef1.current.value = ''\r\n        } else {\r\n            formik.values.user2 = ''\r\n            userRef2.current.value = ''\r\n        }\r\n    }\r\n\r\n    // 表单\r\n    const formik = useFormik({\r\n        initialValues: {\r\n            user1: '',\r\n            user2: '',\r\n        },\r\n        onSubmit: () => {\r\n            if (isAvatar[0] || isAvatar[1]) {\r\n                setIsShow(true)\r\n            }\r\n        },\r\n        validate: v => {\r\n            setIsShow(false)\r\n            let error = {}\r\n            if (!v.user1) error.message = '请输入用户名'\r\n            return error\r\n        }\r\n    })\r\n\r\n    return (\r\n        <div style={{width:'80%', display:'flex', flexDirection:'column', alignItems:'center', margin:'0 auto'}}>\r\n        <h2>Instructions</h2>\r\n        <div style={{width:'80%', display:'flex', justifyContent:'space-between'}}>\r\n            <div>\r\n            <h3 style={{textAlign:'center'}}>Enter two Github users</h3>\r\n            <i style={{color:'orange', width:'200px', height:'200px', backgroundColor:'#eee', display:'flex', justifyContent:'center', alignItems:'center'}} className=\"fas fa-users fa-8x\">\r\n                <img src=\"\" alt=\"\" />\r\n            </i>\r\n            </div>\r\n            <div>\r\n            <h3 style={{textAlign:'center'}}>Battle</h3>\r\n            <i style={{color:'#666', width:'200px', height:'200px', backgroundColor:'#eee', display:'flex', justifyContent:'center', alignItems:'center'}} className=\"fas fa-fighter-jet fa-8x\">\r\n                <img src=\"\" alt=\"\" />\r\n            </i>\r\n            </div>\r\n            <div>\r\n            <h3 style={{textAlign:'center'}}>See the winner</h3>\r\n            <i style={{color:'yellow', width:'200px', height:'200px', backgroundColor:'#eee', display:'flex', justifyContent:'center', alignItems:'center'}} className=\"fas fa-trophy fa-8x\">\r\n                <img src=\"\" alt=\"\" />\r\n            </i>\r\n            </div>\r\n        </div>\r\n        <h2 style={{marginTop:'100px'}}>Players</h2>\r\n        <form style={{width:'100%'}} onSubmit={formik.handleSubmit}>\r\n            <div style={{width:'100%', display:'flex', justifyContent:'space-around'}}>\r\n            <div>\r\n                <h3 style={{textAlign:'center'}}>Player One</h3>\r\n                <input onKeyDown={(e) => {clickHandle(e, 0)}} ref={userRef1} name=\"user1\" type=\"text\" defaultValue={formik.values.user1} onChange={formik.handleChange} />\r\n                <button onClick={(e) => {clickHandle(e, 0)}} style={{marginLeft:'20px', cursor:formik.values.user1.trim() === '' ? 'not-allowed' : 'pointer'}} disabled={formik.values.user1.trim() === '' || isAvatar[0] ? 'disabled' : ''} type=\"submit\">SUBMIT</button>\r\n            </div>\r\n            <div>\r\n                <h3 style={{textAlign:'center'}}>Player Two</h3>\r\n                <input onKeyDown={(e) => {clickHandle(e, 1)}} ref={userRef2} name=\"user2\" type=\"text\" defaultValue={formik.values.user2} onChange={formik.handleChange} />\r\n                <button onClick={(e) => {clickHandle(e, 1)}} style={{marginLeft:'20px', cursor:formik.values.user2.trim() === '' ? 'not-allowed' : 'pointer'}} disabled={formik.values.user2.trim() === '' || isAvatar[1] ? 'disabled' : ''} type=\"submit\">SUBMIT</button>\r\n            </div>\r\n            </div>\r\n        </form>\r\n        <div style={{width:'74%', position:'relative'}}>\r\n            {\r\n            isAvatar.map((v, i) => {\r\n                return (\r\n                <div key={i} style={{display:isAvatar[i] ? 'flex' : 'none', margin:'20px 0', position:'absolute', right:i === 1 ? '0' : '', alignItems:'center', fontSize:'28px', color:'#1890ff'}}>\r\n                    <img style={{width:'64px', height:'64px', marginRight:'20px'}} src={img[i]} alt=\"\" />\r\n                    <div>{name[i]}</div>\r\n                    <span onClick={() => {removeAvatar(i)}} style={{marginLeft:'15px',height:'36px',width:'36px',fontSize:'48px',display:'inline-block',borderRadius:'50%', color:'#fff',cursor:'pointer'}}>\r\n                    <i style={{fontSize:'36px', position:'absolute',color:'red'}} className=\"fas fa-times-circle\"></i>\r\n                    </span>\r\n                </div>\r\n                )\r\n            })\r\n            }\r\n        </div>\r\n        <button style={{display:isShow ? 'block' : 'none', marginTop:'100px', width:'100px', height:'40px'}}>\r\n            <Link style={{textDecoration:'none', color:'#333', padding:'12px 18px'}} to={`/battle/result?user1=${name[0]}&user2=${name[1]}`}>BATTLE</Link>\r\n        </button>\r\n        </div>\r\n    )\r\n}\r\n"],"names":["Battle","useState","isShow","setIsShow","isAvatar","setIsAvatar","Array","img","setImg","name","setName","userRef1","useRef","userRef2","clickHandle","e","num","clientX","keyCode","username","target","parentNode","childNodes","value","trim","index","message","axios","then","response","temp","slice","data","id","tempname","error","console","log","getAvatar","formik","useFormik","initialValues","user1","user2","onSubmit","validate","v","style","width","display","flexDirection","alignItems","margin","justifyContent","textAlign","color","height","backgroundColor","className","src","alt","marginTop","handleSubmit","onKeyDown","ref","type","defaultValue","values","onChange","handleChange","onClick","marginLeft","cursor","disabled","position","map","i","key","right","fontSize","marginRight","current","borderRadius","textDecoration","padding","to"],"sourceRoot":""}