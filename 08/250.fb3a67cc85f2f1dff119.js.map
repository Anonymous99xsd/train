{"version":3,"file":"250.fb3a67cc85f2f1dff119.js","mappings":"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","sources":["webpack://08/./src/components/Battle/index.js"],"sourcesContent":["import React, { useState, useRef } from 'react'\r\nimport axios from 'axios'\r\nimport { useFormik } from 'formik'\r\nimport { Link } from 'react-router-dom'\r\nimport { message } from 'antd';\r\nimport 'antd/dist/antd.css';\r\n\r\nexport default function Battle() {\r\n    const [isShow, setIsShow] = useState(localStorage.getItem('isBtn') || false)\r\n    // 获取本地存储数据\r\n    const [nameObj] = useState(JSON.parse(localStorage.getItem('nameObj')))\r\n    // 控制头像实例显示\r\n    const [isAvatar, setIsAvatar] = useState([false, false])\r\n    const [img, setImg] = useState(new Array(2))\r\n    const [name, setName] = useState(new Array(2))\r\n    // 输入框实例\r\n    const userRef1 = useRef()\r\n    const userRef2 = useRef()\r\n    // 警告提示框\r\n    const warning = () => {\r\n        message.warning('已经请求过数据');\r\n    };\r\n    // 错误提示框\r\n    const errorMsg = () => {\r\n        message.error('用户查找失败');\r\n    };\r\n    // 查询头像方法\r\n    const getAvatar = (username, index) => {\r\n        if (isAvatar[index]) {\r\n            warning()\r\n            return\r\n        }\r\n        axios.get('https://api.github.com/users/' + username)\r\n          .then(response => {\r\n            let temp = img.slice()\r\n            temp[index] = `https://avatars.githubusercontent.com/u/${response.data.id}?s=200&v=4`\r\n            setImg(temp)\r\n            let tempname = name.slice()\r\n            tempname[index] = username\r\n            setName(tempname)\r\n          })\r\n          .then(() => {\r\n            let temp = isAvatar.slice()\r\n            temp[index] = true\r\n            setIsAvatar(temp)\r\n          })\r\n          .catch(error => {\r\n            console.log('error', error.message);\r\n            errorMsg()\r\n          })\r\n        // let temp = img.slice()\r\n        // temp[index] = `https://github.com/${username}.png?size=200`\r\n        // setImg(temp)\r\n        // let tempname = name.slice()\r\n        // tempname[index] = username\r\n        // setName(tempname)\r\n        // let tempa = isAvatar.slice()\r\n        // tempa[index] = true\r\n        // setIsAvatar(tempa)\r\n    }\r\n\r\n    function clickHandle(e, num) {\r\n        if (e.clientX === 0 || (e.keyCode && e.keyCode !== 13)) return\r\n        let username = e.target.parentNode.childNodes[1].value\r\n        if (username.trim() === '') return\r\n        if (!num) {\r\n            getAvatar(username, 0)\r\n        } else {\r\n            getAvatar(username, 1)\r\n        }\r\n    }\r\n\r\n    function removeAvatar(index) {\r\n        let temp = isAvatar.slice()\r\n        temp[index] = false\r\n        setIsAvatar(temp)\r\n        setIsShow(false)\r\n        if (!index) {\r\n        formik.values.user1 = ''\r\n        userRef1.current.value = ''\r\n        } else {\r\n        formik.values.user2 = ''\r\n        userRef2.current.value = ''\r\n        }\r\n    }\r\n\r\n    // 表单\r\n    const formik = useFormik({\r\n        initialValues: {\r\n        user1: nameObj?.user1 ?? '',\r\n        user2: nameObj?.user2 ?? '',\r\n        },\r\n        onSubmit: () => {\r\n        if (isAvatar[0] || isAvatar[1]) {\r\n            setIsShow(true)\r\n            localStorage.setItem('isBtn', true)\r\n        }\r\n        },\r\n        validate: v => {\r\n        localStorage.removeItem('isBtn')\r\n        setIsShow(false)\r\n        localStorage.setItem('nameObj', JSON.stringify(v))\r\n        let error = {}\r\n        if (!v.user1) error.message = '请输入用户名'\r\n        return error\r\n        }\r\n    })\r\n\r\n    return (\r\n        <div style={{width:'80%', display:'flex', flexDirection:'column', alignItems:'center', margin:'0 auto'}}>\r\n        <h2>Instructions</h2>\r\n        <div style={{width:'80%', display:'flex', justifyContent:'space-between'}}>\r\n            <div>\r\n            <h3 style={{textAlign:'center'}}>Enter two Github users</h3>\r\n            <i style={{color:'orange', width:'200px', height:'200px', backgroundColor:'#eee', display:'flex', justifyContent:'center', alignItems:'center'}} className=\"fas fa-users fa-8x\">\r\n                <img src=\"\" alt=\"\" />\r\n            </i>\r\n            </div>\r\n            <div>\r\n            <h3 style={{textAlign:'center'}}>Battle</h3>\r\n            <i style={{color:'#666', width:'200px', height:'200px', backgroundColor:'#eee', display:'flex', justifyContent:'center', alignItems:'center'}} className=\"fas fa-fighter-jet fa-8x\">\r\n                <img src=\"\" alt=\"\" />\r\n            </i>\r\n            </div>\r\n            <div>\r\n            <h3 style={{textAlign:'center'}}>See the winner</h3>\r\n            <i style={{color:'yellow', width:'200px', height:'200px', backgroundColor:'#eee', display:'flex', justifyContent:'center', alignItems:'center'}} className=\"fas fa-trophy fa-8x\">\r\n                <img src=\"\" alt=\"\" />\r\n            </i>\r\n            </div>\r\n        </div>\r\n        <h2 style={{marginTop:'100px'}}>Players</h2>\r\n        <form style={{width:'100%'}} onSubmit={formik.handleSubmit}>\r\n            <div style={{width:'100%', display:'flex', justifyContent:'space-around'}}>\r\n            <div>\r\n                <h3 style={{textAlign:'center'}}>Player One</h3>\r\n                <input onKeyDown={(e) => {clickHandle(e, 0)}} ref={userRef1} name=\"user1\" type=\"text\" defaultValue={formik.values.user1} onChange={formik.handleChange} />\r\n                <button onClick={(e) => {clickHandle(e, 0)}} style={{marginLeft:'20px', cursor:formik.values.user1.trim() === '' ? 'not-allowed' : 'pointer'}} disabled={formik.values.user1.trim() === '' ? 'disabled' : ''} type=\"submit\">SUBMIT</button>\r\n            </div>\r\n            <div>\r\n                <h3 style={{textAlign:'center'}}>Player Two</h3>\r\n                <input onKeyDown={(e) => {clickHandle(e, 1)}} ref={userRef2} name=\"user2\" type=\"text\" defaultValue={formik.values.user2} onChange={formik.handleChange} />\r\n                <button onClick={(e) => {clickHandle(e, 1)}} style={{marginLeft:'20px', cursor:formik.values.user2.trim() === '' ? 'not-allowed' : 'pointer'}} disabled={formik.values.user2.trim() === '' ? 'disabled' : ''} type=\"submit\">SUBMIT</button>\r\n            </div>\r\n            </div>\r\n        </form>\r\n        <div style={{width:'74%', position:'relative'}}>\r\n            {\r\n            isAvatar.map((v, i) => {\r\n                return (\r\n                <div key={i} style={{display:isAvatar[i] ? 'flex' : 'none', margin:'20px 0', position:'absolute', right:i === 1 ? '0' : '', alignItems:'center', fontSize:'28px', color:'#1890ff'}}>\r\n                    <img style={{width:'64px', height:'64px', marginRight:'20px'}} src={img[i]} alt=\"\" />\r\n                    <div>{name[i]}</div>\r\n                    <span onClick={() => {removeAvatar(i)}} style={{marginLeft:'15px',height:'36px',width:'36px',fontSize:'48px',display:'inline-block',borderRadius:'50%', color:'#fff',cursor:'pointer'}}>\r\n                    <i style={{fontSize:'36px', position:'absolute',color:'red'}} className=\"fas fa-times-circle\"></i>\r\n                    </span>\r\n                </div>\r\n                )\r\n            })\r\n            }\r\n        </div>\r\n        <button style={{display:isShow ? 'block' : 'none', marginTop:'100px', width:'100px', height:'40px'}}>\r\n            <Link style={{textDecoration:'none', color:'#333', padding:'12px 18px'}} to={`/battle/result?user1=${name[0]}&user2=${name[1]}`}>BATTLE</Link>\r\n        </button>\r\n        </div>\r\n    )\r\n}\r\n"],"names":["Battle","useState","localStorage","getItem","isShow","setIsShow","nameObj","JSON","parse","isAvatar","setIsAvatar","Array","img","setImg","name","setName","userRef1","useRef","userRef2","clickHandle","e","num","clientX","keyCode","username","target","parentNode","childNodes","value","trim","index","message","axios","then","response","temp","slice","data","id","tempname","error","console","log","getAvatar","formik","useFormik","initialValues","user1","user2","onSubmit","setItem","validate","v","removeItem","stringify","style","width","display","flexDirection","alignItems","margin","justifyContent","textAlign","color","height","backgroundColor","className","src","alt","marginTop","handleSubmit","onKeyDown","ref","type","defaultValue","values","onChange","handleChange","onClick","marginLeft","cursor","disabled","position","map","i","key","right","fontSize","marginRight","current","borderRadius","textDecoration","padding","to"],"sourceRoot":""}